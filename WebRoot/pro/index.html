<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>index.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->

	<script type="text/javascript">
		function caleFinalPrice(){
			var num = document.getElementById('num').value;
			var price = document.getElementById('price').value;
			if(num == null || num == undefined || num == "" || price == null || price == undefined || price == ""){
				//alert("商品数量或单价不能为空！");
				document.getElementById('priceMsg').innerText = "商品数量或单价不能为空！";
			}else{
				document.getElementById('priceMsg').innerText = "";
				var fp = parseInt(num) * parseFloat(price);
				document.getElementById('finalPrice').value = fp;
			}
		}
		function validator(){
			var gid = document.getElementById('gid');
			for ( var int = 0; int < gid.childNodes.length; int++) {
				if(gid.childNodes[int].selected == true && gid.childNodes[int].value == "none"){
					document.getElementById('goodsMsg').innerText = "请选择商品";
					return false;
				}
			}
			document.getElementById('goodsMsg').innerText = "";
			return true;
		}
	</script>
  </head>
  
  <body>
    <h1>铺货列表</h1>
    <p><a href="${contextPath}/nev/main">返回</a></p>
    ${(msg.msgContent)!''}
    <form action="${contextPath}/pro/addPro" method="post">
    	<fieldset>
    		<legend>新增出库</legend>
    		商品：
    		<select name="sell.goodsid" id="gid">
    			<option value="none" name="op">--请选择--</option>
	    		<#list goodsList as goods>
					<option name="op" value="${(goods.id)!''}">${(goods.goodsname)!''}-${(goods.CostPrice)!''}-${(goods.retailPrice)}</option>
				</#list>
    		</select><span style="color:red;" id="goodsMsg"></span>
    		数量：<input type="text" name="sell.goodsnum" id="num"/>
    		单价：<input type="text" name="sell.goodsPrice" onblur="caleFinalPrice()" id="price"/><span style="color:red;" id="priceMsg"></span>
    		应收金额：<input type="text" name="sell.finalPrice" readonly="readonly" id="finalPrice"/>
    		销售类型：
    		<select name="sell.outType">
    			<option value="pro">铺货</option>
    			<option value="proback">退货</option>
    		</select>
    		客户姓名：<input type="text" name="sell.custname" />
    		备注：<input type="text" name="sell.remark"/>
    		<input type="submit" name="ok" value="添加" onclick="return validator()"/>
    	</fieldset>
    </form>
    <table>
    	<tr>
    		<td>编号</td>
    		<td>商品id</td>
    		<td>销售数量</td>
    		<td>销售单价</td>
    		<td>应收金额</td>
    		<td>销售类型</td>
    		<td>客户姓名</td>
    		<td>备注</td>
    		<td>创建时间</td>
    		<td>创建人</td>
    	</tr>
    	<!-- 切记！！！freemarker需要安全输出，要使用（）！‘’形式判断字段是否为空，否则显示不出来 -->
    	<#list sellList as sell>
    		<tr>
    			<td>${(sell.id)!'空'}</td>
    			<td>${(sell.goodsid)!'空'}</td>
    			<td>${(sell.goodsnum)!'空'}</td>
    			<td>${(sell.goodsPrice)!'空'}</td>
    			<td>${(sell.finalPrice)!'空'}</td>
    			<td>${(sell.outType)!'空'}</td>
    			<td>${(sell.custname)!'空'}</td>
    			<td>${(sell.remark)!'空'}</td>
    			<td>${(sell.createTime)!'空'}</td>
    			<td>${(sell.createid)!'空'}</td>
    		</tr>
    	</#list>
    </table>
  </body>
</html>
